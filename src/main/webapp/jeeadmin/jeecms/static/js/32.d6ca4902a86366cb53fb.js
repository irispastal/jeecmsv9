webpackJsonp([32],{IJmn:function(n,a,t){a=n.exports=t("UTlt")(!1),a.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},RVS4:function(n,a,t){"use strict";function e(n){t("rJPv")}Object.defineProperty(a,"__esModule",{value:!0});var s=t("hRKE"),l=t.n(s),o=t("lcoF"),r=t("2sCs"),i=t.n(r),d=t("x1ym"),c=t("P9l9"),f={mixins:[o.a],data:function(){var n=this,a=d.a.required("此项必填"),t=d.a.number("只能输入数字"),e=d.a.email("请输入正确的邮箱地址"),s=(d.a.validateName("用户名已存在"),d.a.tel("请输入正确的固定电话")),l=d.a.mobile("请输入正确的手机号");d.a.level(this.$route.query.type);return{params:{queryUsername:"",https:""},rules:{username:[a],email:[e],password:[function(){return{validator:function(a,t,e){""===t||void 0==t?e():t.length<n.passwordMinLen?e(new Error("密码长度不能小于系统设定值:"+n.passwordMinLen)):(""!==n.dataInfo.confirmPassword&&n.$refs.form.validateField("confirmPassword"),e())},trigger:"blur"}}()],confirmPassword:[function(){return{validator:function(a,t,e){""===t?e():t!==n.dataInfo.password?e(new Error("前后密码不一致")):e()},trigger:"blur"}}()],groupId:[a,t],grain:[a,t],phone:[s],mobile:[l],disabled:[a],rank:[function(){return{validator:function(n,a,t){""!=a&&i.a.post(c.a.adminValRank,{id:"",rank:a}).then(function(n){""==a?t():"200"==n.code?n.body.result?t():t(new Error("不能大于自身级别")):t(new Error("服务器响应异常"))})},trigger:"blur"}}()]},dialogDepartments:!1,parents:[],departmentList:[],memberGroup:[],passwordMinLen:"",roles:[],allControlChannels:[],defaultProps:{label:"name",value:"id",children:"child"},dialogVisible:!1}},methods:{getRoleIds:function(n){},getDataInfo:function(n,a){var t=this,e=this.$api;i.a.all([i.a.post(e.adminGlocalGet,{id:n,https:a}),i.a.post(e.groupList),i.a.post(e.roleList),i.a.post(e.departmentList)]).then(i.a.spread(function(n,a,e,s){t.dataInfo=n.body,t.passwordMinLen=t.dataInfo.passwordMinLen,t.dataInfo.allChannels=t.dataInfo.allChannels[0],t.dataInfo.allControlChannels=t.dataInfo.allControlChannels[0],t.departmentList=t.departmentList.concat({name:"无",pid:"",id:"",priority:"",weights:""}),t.departmentList=t.departmentList.concat(s.body),t.memberGroup=a.body,""===t.dataInfo.departmentIds?t.parents=[""]:t.parents=t.dataInfo.departmentIds,t.roles=e.body,t.$refs.form.resetFields(),t.loading=!1})).catch(function(n){t.loading=!1})},update:function(){var n={};for(var a in this.dataInfo)n[a]=this.dataInfo[a];n.departmentId=this.parents[this.parents.length-1],n.roleIds=n.roleIds.join(","),n.steps=1;for(var t in n)"object"==l()(n[t])&&delete n[t];this.updateDataInfo(this.$api.adminGlocalUpdate,n,"list")}},created:function(){this.getDataInfo(this.id)}},p=function(){var n=this,a=n.$createElement,t=n._self._c||a;return t("section",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"cms-body"},[t("cms-back"),n._v(" "),t("el-form",{ref:"form",staticClass:"cms-form",attrs:{"label-width":"162px",model:n.dataInfo,rules:n.rules}},[t("el-form-item",{staticClass:"flex-50",attrs:{label:"用户名",prop:"username"}},[n._v("\n              "+n._s(n.dataInfo.username)+"       \n         ")]),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{staticClass:"cms-width",attrs:{type:"email"},model:{value:n.dataInfo.email,callback:function(a){n.$set(n.dataInfo,"email",a)},expression:"dataInfo.email"}})],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"密码",prop:"password"}},[t("el-input",{staticClass:"cms-width",attrs:{type:"password"},model:{value:n.dataInfo.password,callback:function(a){n.$set(n.dataInfo,"password",a)},expression:"dataInfo.password"}}),n._v(" "),t("span",{staticClass:"gray"},[n._v("不修改请留空")])],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"确定密码",prop:"confirmPassword"}},[t("el-input",{staticClass:"cms-width",attrs:{type:"password"},model:{value:n.dataInfo.confirmPassword,callback:function(a){n.$set(n.dataInfo,"confirmPassword",a)},expression:"dataInfo.confirmPassword"}}),n._v(" "),t("span",{staticClass:"gray"},[n._v("不修改请留空")])],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"会员组",prop:"groupId"}},[t("el-select",{staticClass:"cms-width",model:{value:n.dataInfo.groupId,callback:function(a){n.$set(n.dataInfo,"groupId",a)},expression:"dataInfo.groupId"}},n._l(n.memberGroup,function(n,a){return t("el-option",{key:a,attrs:{label:n.name,value:n.id}})}))],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"等级",prop:"rank"}},[t("el-input",{staticClass:"cms-width",attrs:{type:"number"},model:{value:n.dataInfo.rank,callback:function(a){n.$set(n.dataInfo,"rank",a)},expression:"dataInfo.rank"}}),n._v(" "),t("span",{staticClass:"gray"},[n._v("越大等级越高")])],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"禁用",prop:"disabled"}},[t("el-radio-group",{model:{value:n.dataInfo.disabled,callback:function(a){n.$set(n.dataInfo,"disabled",a)},expression:"dataInfo.disabled"}},[t("el-radio",{attrs:{label:!0}},[n._v("是")]),n._v(" "),t("el-radio",{attrs:{label:!1}},[n._v("否")])],1)],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"登录次数",prop:"loginCount"}},[n._v("\n             "+n._s(n.dataInfo.loginCount)+" \n         ")]),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"注册",prop:"loginCount"}},[n._v("\n             "+n._s(n.dataInfo.registerTime)+" "+n._s(n.dataInfo.registerIp)+" \n         ")]),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"最后登陆时间",prop:"lastLoginTime"}},[n._v("\n             "+n._s(n.dataInfo.lastLoginTime)+" \n         ")]),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"真实姓名",prop:"realname"}},[t("el-input",{staticClass:"cms-width",attrs:{type:"username"},model:{value:n.dataInfo.realname,callback:function(a){n.$set(n.dataInfo,"realname",a)},expression:"dataInfo.realname"}})],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"性别",prop:"gender"}},[t("el-radio-group",{model:{value:n.dataInfo.gender,callback:function(a){n.$set(n.dataInfo,"gender",a)},expression:"dataInfo.gender"}},[t("el-radio",{attrs:{label:!0}},[n._v("男")]),n._v(" "),t("el-radio",{attrs:{label:!1}},[n._v("女")])],1)],1),n._v(" "),t("el-form-item",{staticClass:"flex-100",attrs:{label:"受限管理员",prop:"selfAdmin"}},[t("el-radio-group",{model:{value:n.dataInfo.selfAdmin,callback:function(a){n.$set(n.dataInfo,"selfAdmin",a)},expression:"dataInfo.selfAdmin"}},[t("el-radio",{attrs:{label:!0}},[n._v("是")]),n._v(" "),t("el-radio",{attrs:{label:!1}},[n._v("否")])],1),n._v(" "),t("span",{staticClass:"gray"},[n._v("只能管理自己的数据")])],1),n._v(" "),t("el-form-item",{staticClass:"flex-100",attrs:{label:"角色",prop:"roleIds"}},[t("el-checkbox-group",{on:{change:n.getRoleIds},model:{value:n.dataInfo.roleIds,callback:function(a){n.$set(n.dataInfo,"roleIds",a)},expression:"dataInfo.roleIds"}},n._l(n.roles,function(a,e){return t("el-checkbox",{key:e,attrs:{label:a.id}},[n._v(n._s(a.name))])})),n._v(" "),t("span",{staticClass:"gray"},[n._v("功能权限的控制在角色中")])],1),n._v(" "),t("el-form-item",{staticClass:"flex-50",attrs:{label:"部门"}},[t("el-cascader",{staticClass:"cms-width",attrs:{options:n.departmentList,props:n.defaultProps,"change-on-select":!0},model:{value:n.parents,callback:function(a){n.parents=a},expression:"parents"}}),n._v(" "),t("span",{staticClass:"gray"},[n._v("内容管理和栏目管理权限集中控制在部门管理中")])],1),n._v(" "),t("el-form-item",{staticClass:"flex-100",attrs:{label:"数据权限"}},[t("el-checkbox",{model:{value:n.dataInfo.allChannels,callback:function(a){n.$set(n.dataInfo,"allChannels",a)},expression:"dataInfo.allChannels"}},[n._v("所有栏目内容权限")]),n._v(" "),t("el-checkbox",{model:{value:n.dataInfo.allControlChannels,callback:function(a){n.$set(n.dataInfo,"allControlChannels",a)},expression:"dataInfo.allControlChannels"}},[n._v("所有栏目控制权限")]),n._v(" "),t("span",{staticClass:"gray"},[n._v("功能权限的控制在角色中")])],1),n._v(" "),t("div",{staticClass:"form-footer"},[t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/adminGlocal/edit",expression:"'/adminGlocal/edit'"}],attrs:{type:"primary"},on:{click:function(a){n.update()}}},[n._v("修改")]),n._v(" "),t("el-button",{attrs:{type:"info"},on:{click:n.$reset}},[n._v("重置")])],1)],1)],1)},m=[],u={render:p,staticRenderFns:m},v=u,I=t("Z0/y"),b=e,_=I(f,v,!1,b,null,null);a.default=_.exports},rJPv:function(n,a,t){var e=t("IJmn");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);t("FIqI")("1e104422",e,!0,{})}});