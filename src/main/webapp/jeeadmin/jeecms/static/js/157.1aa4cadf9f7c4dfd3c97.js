webpackJsonp([157],{Gggh:function(n,e,t){e=n.exports=t("UTlt")(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},ex5X:function(n,e,t){"use strict";function i(n){t("yRqW")}Object.defineProperty(e,"__esModule",{value:!0});var a=t("5HJ5"),r=(t("2sCs"),t("x1ym")),s={mixins:[a.a],data:function(){r.a.required();return{params:{},rules:{priority:[r.a.number()]},regDefId:0}},methods:{checkP:function(n){/^[0-9]+$/.test(n)||this.open()},open:function(){var n=this;this.$alert("排列顺序不能为空","提示",{confirmButtonText:"确定",callback:function(e){n.initTableData(n.$api.configRegisterItemList,n.params)}})},getTableData:function(n){var e=this;this.loading=!0,this.$http.post(this.listUrl,n).then(function(n){n.totalCount&&(e.total=n.totalCount),e.tableData=n.body,e.getRegRefId(n.body),e.loading=!1}).catch(function(n){e.loading=!1})},priorityBatch:function(n,e,t,i){var a=this;this.$confirm("是否保存？","警告",{type:"warning"}).then(function(r){a.$http.post(n,{ids:e,priorities:i,labels:t}).then(function(n){"200"==n.code&&(a.successMessage("保存成功!"),a.getTableData(a.params))})}).catch(function(n){})},getPriority:function(n){var e=[];for(var t in n)e.push(n[t].priority);return e.join(",")},getLabels:function(n){var e=[];for(var t in n)e.push(n[t].label);return e.join(",")},getRegRefId:function(n){for(var e in n)if(n[e].regDef){this.regDefId=n[e].id;break}}},created:function(){this.initTableData(this.$api.configRegisterItemList,this.params)}},l=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"cms-body"},[t("div",{staticClass:"cms-list-header"},[t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/globel/registerModel/add",expression:"'/globel/registerModel/add'"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){n.routerLink("/globel/registerModel/add","save",0)}}},[n._v("添加")])],1),n._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData,stripe:"",rules:n.rules},on:{"selection-change":n.checkIds}},[t("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),n._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"field",label:"字段",align:"center"}}),n._v(" "),t("el-table-column",{attrs:{prop:"dataType",label:"数据类型",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[1==e.row.dataType?t("span",[n._v("字符串文本")]):n._e(),n._v(" "),2==e.row.dataType?t("span",[n._v("整型文本")]):n._e(),n._v(" "),3==e.row.dataType?t("span",[n._v("浮点型文本")]):n._e(),n._v(" "),4==e.row.dataType?t("span",[n._v("文本区")]):n._e(),n._v(" "),5==e.row.dataType?t("span",[n._v("日期")]):n._e(),n._v(" "),6==e.row.dataType?t("span",[n._v("下拉列表")]):n._e(),n._v(" "),7==e.row.dataType?t("span",[n._v("复选框")]):n._e(),n._v(" "),8==e.row.dataType?t("span",[n._v("单选框")]):n._e()])}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"label",label:"名称",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("el-input",{staticClass:"w80",model:{value:e.row.label,callback:function(t){n.$set(e.row,"label",t)},expression:"scope.row.label"}})],1)}}])}),n._v(" "),t("el-table-column",{attrs:{label:"排列顺序",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("el-input",{staticClass:"w80",attrs:{type:"number"},on:{blur:function(t){n.checkP(e.row.priority)}},model:{value:e.row.priority,callback:function(t){n.$set(e.row,"priority",t)},expression:"scope.row.priority"}})],1)}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"name",label:"操作",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return t("div",{},[t("cms-button",{directives:[{name:"perms",rawName:"v-perms",value:"/globel/registerModel/edit",expression:"'/globel/registerModel/edit'"}],attrs:{type:"edit"},nativeOn:{click:function(t){n.routerLink("/globel/registerModel/edit","update",e.row.id)}}}),n._v(" "),t("cms-button",{directives:[{name:"perms",rawName:"v-perms",value:"/globel/registerModel/delete",expression:"'/globel/registerModel/delete'"}],attrs:{type:"delete"},nativeOn:{click:function(t){n.deleteBatch(n.$api.configRegisterItemDelete,e.row.id)}}})],1)}}])})],1),n._v(" "),t("div",{staticClass:"cms-list-footer "},[t("div",{staticClass:"cms-left"},[t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/config/registerModel/delete",expression:"'/config/registerModel/delete'"}],attrs:{disabled:n.disabled},on:{click:function(e){n.deleteBatch(n.$api.configRegisterItemDelete,n.ids)}}},[n._v("批量删除")]),n._v(" "),t("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/config/registerModel/savePriority",expression:"'/config/registerModel/savePriority'"}],attrs:{disabled:n.disabled},nativeOn:{click:function(e){n.priorityBatch(n.$api.configRegisterItemPriority,n.ids,n.getLabels(n.checkedList),n.getPriority(n.checkedList))}}},[n._v("保存排列顺序")])],1)])],1)},o=[],c={render:l,staticRenderFns:o},d=c,p=t("Z0/y"),u=i,v=p(s,d,!1,u,null,null);e.default=v.exports},yRqW:function(n,e,t){var i=t("Gggh");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("FIqI")("16a2fa8f",i,!0,{})}});